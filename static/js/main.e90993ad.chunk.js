(this.webpackJsonpwarehouse=this.webpackJsonpwarehouse||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),a=n.n(r),i=n(8),s=n.n(i),o=(n(19),n(12)),u=n(3),l=(n(20),n(2)),j=n.n(l),f=n(6),h="https://bad-api-assignment.reaktor.com/",b={method:"GET",headers:{"Content-Type":"application/json","Cache-Control":"max-age=300, must-revalidate"}};function d(){return(d=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:caches.delete("app-cache");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return p.apply(this,arguments)}function p(){return(p=Object(f.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open("app-cache");case 2:return n=e.sent,e.next=5,n.match("".concat(h).concat(t));case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return x.apply(this,arguments)}function x(){return(x=Object(f.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open("app-cache");case 2:return n=e.sent,e.next=5,O(t);case 5:if(void 0===(c=e.sent)){e.next=10;break}return e.abrupt("return",c.json());case 10:return e.abrupt("return",fetch("".concat(h).concat(t),b).then((function(e){if(e.ok)return n.add("".concat(h).concat(t)),setTimeout((function(){return n.delete("".concat(h).concat(t))}),3e5),e.json();throw new Error("request failed")})).catch(console.log));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=n.p+"static/media/loading.b33cf617.png";var g=function(){return Object(c.jsx)("div",{className:"flex-center",children:Object(c.jsx)("img",{src:m,alt:"loading",className:"rotation"})})};var w=function(e){return Object(c.jsx)("div",{className:"scroll",children:e.isLoading?Object(c.jsx)(g,{}):Object(c.jsx)("div",{children:e.children})})};var y=function(e){var t=e.info;return Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("p",{className:"name",children:t.name}),Object(c.jsxs)("p",{children:["Price: ",t.price]}),Object(c.jsxs)("p",{children:["Colors: ",t.color.join("-")]}),Object(c.jsxs)("p",{children:["Mfr.: ",t.manufacturer]}),t.availability?Object(c.jsx)("p",{className:"OUT OF STOCK"===t.availability?"out":"LESS THAN 10"===t.availability?"less-than-10":"",children:t.availability}):Object(c.jsx)(g,{})]})};var S=function(e){var t=e.list;return Object(c.jsx)("div",{className:"grid",children:t.map((function(e,t){return Object(c.jsx)(y,{info:e},t)}))})};var T=function(e){var t=e.categories,n=e.categoryOnDisplay,r=e.switchCategory;return Object(c.jsx)("div",{className:"switcher flex-row",children:t.map((function(e,t){return Object(c.jsx)("button",{style:n===e?{border:"2px solid black"}:{},onClick:function(){return r(e)},children:e},t)}))})};var C=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)("shirts"),s=Object(u.a)(i,2),l=s[0],j=s[1],f=Object(r.useState)([]),h=Object(u.a)(f,2),b=h[0],d=h[1],O=Object(r.useState)(!0),p=Object(u.a)(O,2),x=p[0],m=p[1],y=Object(r.useState)(-1),C=Object(u.a)(y,2),k=C[0],A=C[1],I=Object(r.useState)(""),N=Object(u.a)(I,2),L=N[0],E=N[1];Object(r.useEffect)((function(){F()}),[l]),Object(r.useEffect)((function(){x||K()}),[k]),Object(r.useEffect)((function(){if(L)throw new Error(L)}),[L]);var F=function(){var e=new Set;v("products/".concat(l)).then((function(t){t.forEach((function(t){return e.add(t.manufacturer)})),a(t),m(!1),d(Object(o.a)(e)),A(0)})).catch((function(e){E(e)}))},K=function(){if(k!==b.length){var e=b[k];v("availability/".concat(e)).then((function(t){for(var c=t.response,r=function(t){if(n[t].manufacturer!==e)return"continue";var r=c.find((function(e){return n[t].id===e.id.toLowerCase()}));if(void 0!==r){var a=function(e){var t=e.replace("<AVAILABILITY>\n  <INSTOCKVALUE>","");switch(t=t.replace("</INSTOCKVALUE>\n</AVAILABILITY>","")){case"OUTOFSTOCK":t="OUT OF STOCK";break;case"LESSTHAN10":t="LESS THAN 10";break;case"INSTOCK":t="IN STOCK"}return t}(r.DATAPAYLOAD);n[t].availability=a}},i=0;i<n.length;i++)r(i);a(n),A(k+1)})).catch((function(e){E(e)}))}};return Object(c.jsxs)("div",{children:[Object(c.jsx)(T,{categoryOnDisplay:l,categories:["jackets","shirts","accessories"],switchCategory:function(e){j(e),m(!0)}}),x?Object(c.jsx)(g,{}):Object(c.jsx)(w,{children:Object(c.jsx)(S,{list:n})})]})},k=n(9),A=n(10),I=n(13),N=n(11),L=function(e){Object(I.a)(n,e);var t=Object(N.a)(n);function n(e){var c;return Object(k.a)(this,n),(c=t.call(this)).state={error:null,errorInfo:null},c}return Object(A.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t}),function(){d.apply(this,arguments)}(),setTimeout(window.location.reload(),7e3)}},{key:"render",value:function(){return this.state.errorInfo?Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Small error occured"}),Object(c.jsx)("p",{children:"The page will reload in 5s."}),Object(c.jsx)("h1",{children:"We are sorry!"})]}):this.props.children}}]),n}(a.a.Component);var E=function(){return Object(c.jsx)("div",{children:Object(c.jsx)(L,{children:Object(c.jsx)(C,{})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(E,{})}),document.getElementById("root")),F()}},[[22,1,2]]]);
//# sourceMappingURL=main.e90993ad.chunk.js.map